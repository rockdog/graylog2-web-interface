window.WebSocket||alert("Your browser does not support WebSockets.");var Realtime=new function(){this.init=function(i,s){_ws=new WebSocket(i),_token=s,_ws.onopen=function(t){e(t,s)},_ws.onclose=function(e){n(e)},_ws.onmessage=function(e){t(e)},_ws.onerror=function(e){r(e)}};var e=function(e,t){e.currentTarget.send(t),o(),s("Successfully opened socket.")},t=function(e){i(a(e.data))},n=function(e){u(),s("Socket has been closed.")},r=function(e){s("Error")},i=function(e){$("#realtime-messages li").length>=200&&$("#realtime-messages li:last").remove(),$("#realtime-messages").prepend("<li>"+e+"</li>")},s=function(e){$("#realtime-debug-log").append("<li><span class='realtime-debug-log-date'>"+new Date+"</span> - "+htmlEncode(e)+"</li>")},o=function(){$("#realtime-status").html("Connected"),$("#realtime-status").removeClass("realtime-status-disconnected"),$("#realtime-status").addClass("realtime-status-connected")},u=function(){$("#realtime-status").html("Disconnected"),$("#realtime-status").removeClass("realtime-status-connected"),$("#realtime-status").addClass("realtime-status-disconnected")},a=function(e){return dash_pos=e.indexOf("-"),message=e.substr(dash_pos+2),date=e.substr(0,dash_pos-1),"<span class='realtime-messages-message-date'>"+htmlEncode(date)+"</span> "+htmlEncode(message)}};$(document).ready(function(){$("#realtime-debug-log-open").bind("click",function(){$("#realtime-debug-log").show(),$(this).hide()})});